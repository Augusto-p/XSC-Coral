 DROP DATABASE IF EXISTS Libreria;
	CREATE DATABASE IF NOT EXISTS Libreria;
	USE Libreria;

	CREATE TABLE Clientes (
	nom_completo_user VARCHAR (255) NOT NULL,
	email VARCHAR (255),
    recuperacion_password VARCHAR (45) NULL,
	fecha_nac_user DATETIME NOT NULL,
	genero VARCHAR (23) NOT NULL,
	contraseña VARCHAR (15)  NOT NULL,
	foto_usuario  BLOB (1)  NOT NULL,
	PRIMARY KEY (email)
	);

	CREATE TABLE Roles_Usuarios (
	email_usr VARCHAR (35),
	rol_usuario VARCHAR (35),
	PRIMARY KEY (email_usr,rol_usuario),
	FOREIGN KEY (email_usr) REFERENCES Clientes (email) 
	);
    
    	CREATE TABLE Autores (
	ident_autor INT (13) UNSIGNED,
	nom_completo_autor VARCHAR (255)  NOT NULL,
	nacionalidad_autor VARCHAR (255)  NOT NULL,
	biografia_autor    VARCHAR (255)  NOT NULL,
	fecha_nac DATETIME (6) NOT NULL,
	PRIMARY KEY (ident_autor)
	);

CREATE TABLE Libros (
isbn INT (30) NOT NULL,
titulo_libro VARCHAR (255)  NOT NULL,
precio_libro DECIMAL UNSIGNED NOT NULL,
id_autor INT (13) UNSIGNED,
sinopsis VARCHAR (255) NOT NULL,
codigs_editorial INT (15) UNSIGNED,
PRIMARY KEY (isbn,id_autor,codigs_editorial),
FOREIGN KEY (id_autor) REFERENCES Autores (ident_autor)
);

CREATE TABLE Imagenes_Libros (
ISbn_Libros INT (30) NOT NULL,
img_libro BLOB (25) NOT NULL,
PRIMARY KEY (ISbn_Libros),
FOREIGN KEY (ISbn_Libros) REFERENCES Libros (isbn)
);

CREATE TABLE Generos_Libs (
isbn_libs INT (30) NOT NULL,
id_autor INT (13) UNSIGNED,
genero_libs VARCHAR (50) NOT NULL,
PRIMARY KEY (isbn_libs,id_autor),
FOREIGN KEY (isbn_libs) REFERENCES Libros (isbn)
);

	CREATE TABLE Carrito_Compras (
	email_client VARCHAR (255) NOT NULL,
	codigo_carrito INT (100) UNSIGNED,
    isbbn_Libros INT (30) NOT NULL,
	fecha_hora DATETIME (6) NOT NULL,
	PRIMARY KEY (email_client,codigo_carrito),
	FOREIGN KEY (email_client) REFERENCES Clientes (email),
    FOREIGN KEY (isbbn_Libros) REFERENCES Libros (isbn)
	);

	CREATE TABLE Editoriales (
	codigo_editorial INT (0) AUTO_INCREMENT,
	nombre_editorial VARCHAR (255) NOT NULL,
	web_editorial VARCHAR (255) NOT NULL,
	PRIMARY KEY (codigo_editorial)
    -- FOREIGN KEY (codigo_editorial) REFERENCES Libros (codigs_editorial) Esta clave me hace explotar la base de datos.
	);
    
    CREATE TABLE Direccion_Editorial (
    codigo_editor INT (0) AUTO_INCREMENT,
    nom_departamento VARCHAR (255) NOT NULL,
    nom_ciudad VARCHAR (255) NOT NULL,
    num_puerta INT (25) NOT NULL,
    PRIMARY KEY (codigo_editor),
    FOREIGN KEY (codigo_editor) REFERENCES Editoriales (codigo_editorial)
    );
    
	CREATE TABLE Tele_Editorial (
	cods_editorial INT (0) AUTO_INCREMENT,
	NumTel_Editorial INT (16) UNSIGNED NOT NULL,
	PRIMARY KEY (cods_editorial),
	FOREIGN KEY (cods_editorial) REFERENCES Editoriales (codigo_editorial)
	);
    
    CREATE TABLE Compras (
    id_compra INT (0) AUTO_INCREMENT,
    estado_compra VARCHAR (255) NOT NULL,
    fecha_hora_compra DATETIME (6) NOT NULL,
    PRIMARY KEY (id_compra),
    FOREIGN KEY (id_compra) REFERENCES EDITORIALES (codigo_editorial)
    );
    
    CREATE TABLE Detalle_Compras (
    id_compras INT (0) AUTO_INCREMENT,
    isbn_books INT (30) NOT NULL,
    codigoEditorial INT (20) NOT NULL,
	metodo_pago_compra VARCHAR (255) NOT NULL,
    precio_compra DECIMAL UNSIGNED NOT NULL,
    cant_compra INT (25) UNSIGNED NOT NULL,
    PRIMARY KEY(id_compras),
    FOREIGN KEY (codigoEditorial) REFERENCES Editoriales (codigo_editorial),
    FOREIGN KEY (id_compras) REFERENCES Compras (id_compra),
    FOREIGN KEY (isbn_books) REFERENCES LIBROS (isbn)
    );
    
        CREATE TABLE Ventas (
    cod_ventas INT (0) AUTO_INCREMENT,
    emailsS_Clients VARCHAR (255) NOT NULL,
    estado_venta VARCHAR (255) NOT NULL,
    fecha_hora_venta DATETIME (6) NOT NULL,
    PRIMARY KEY (cod_ventas,emailsS_Clients),
    FOREIGN KEY (emailsS_Clients) REFERENCES Clientes (email)
    );
    
    CREATE TABLE Pedidos (
    codigo_pedidos INT (0) AUTO_INCREMENT,
    EMail_clientss VARCHAR (255),
    id_venta INT (20) NOT NULL,
    descrip_pedidos VARCHAR (255) NOT NULL,
	sistema_envio VARCHAR (255) NOT NULL,
    PRIMARY KEY (codigo_pedidos),
    FOREIGN KEY (Email_Clientss) REFERENCES Clientes (email),
    FOREIGN KEY (id_venta) REFERENCES Ventas (cod_ventas)
    );
        
    CREATE TABLE Detalle_Ventas (
    codigo_ventass INT (0) AUTO_INCREMENT,
    Isbn_Book INT (30) NOT NULL,
    cant_libros_comprados INT (25) UNSIGNED NOT NULL,
    costo_Venta DECIMAL UNSIGNED NOT NULL,
	metodo_pago VARCHAR (255) NOT NULL,
    descuento_venta INT (25) UNSIGNED NOT NULL,
    PRIMARY KEY (codigo_ventass),
    FOREIGN KEY (codigo_ventass) REFERENCES Ventas (cod_ventas),
    FOREIGN KEY (Isbn_Book)  REFERENCES Libros (isbn)
    );
    
    --  DATOS DE CLIENTES --

INSERT INTO Clientes VALUES ('Lucas Hernandez','lucassyt@gmail.com','','2001/07/10','Masculino','lucasLOCO','Public/img/Clientes/1.jpg');
INSERT INTO Clientes VALUES ('Lucia Lopez','lucia@gmail.com','','2000/06/04','Femenino','corazónluci','Public/img/Clientes/2.jpg');
INSERT INTO Clientes VALUES ('David Dos Santos','David@gmail.com','','1999/05/02','Masculino','MarSanchez','Public/img/Clientes/3.jpg');
INSERT INTO Clientes VALUES ('Augusto Picardo','Augusto@gmail.com','','2005/03/08','Masculino','GUstavinlol','Public/img/Clientes/4.jpg');
INSERT INTO Clientes VALUES ('Zoey Carrasco','Zoeyamigos@gmail.com','','1997/07/03','Femenino','ZoasCarras','Public/img/Clientes/5.jpg');

-- ROLES_USUARIOS --

INSERT INTO Roles_Usuarios  (email_usr,rol_usuario) VALUES ('lucassyt@gmail.com','Cliente');
INSERT INTO Roles_Usuarios  (email_usr,rol_usuario)  VALUES ('lucia@gmail.com','Cliente');
INSERT INTO Roles_Usuarios  (email_usr,rol_usuario) VALUES ('David@gmail.com','Administrador');
INSERT INTO Roles_Usuarios  (email_usr,rol_usuario) VALUES ('Augusto@gmail.com','Administrador');
INSERT INTO Roles_Usuarios  (email_usr,rol_usuario) VALUES ('Zoeyamigos@gmail.com','Visitante');

-- DATOS DE AUTORES --

INSERT INTO Autores VALUES ('333','Michael Crichton','EE.UU','Creador del libro Jurassic Park','1942/04/10');
INSERT INTO Autores VALUES ('555','Stephen King','EE.UU','Creador de libros de terror como IT','1947/09/09');
INSERT INTO Autores VALUES ('433','Joanne Rowling​','Reino Unido','Creadora de la iconica saga de Harry Potter','1965/04/03');
INSERT INTO Autores VALUES ('777','Chabname Zariab','Afganistan','Creadora de Libros como  Le pianiste afghan: roman','1982/03/08');
INSERT INTO Autores VALUES ('411','Lorenzo Silva','España','Creador de Libros como Nadie por Delante','1966/06/05');

-- DATOS DE LIBROS -- 

INSERT INTO Libros (isbn,titulo_libro,precio_libro,id_autor,sinopsis,codigs_editorial) VALUES ('98501','Jurassic Park','850','333','Un parque de dinosaurios','5178');
INSERT INTO Libros (isbn,titulo_libro,precio_libro,id_autor,sinopsis,codigs_editorial) VALUES ('51565','IT','900','555','Un payaso que usa los miedos en tu contra','6199');
INSERT INTO Libros (isbn,titulo_libro,precio_libro,id_autor,sinopsis,codigs_editorial) VALUES ('12468','Harry Potter y la piedra filosofal','750','433','Acompaña a harry en otra aventura','7115');
INSERT INTO Libros (isbn,titulo_libro,precio_libro,id_autor,sinopsis,codigs_editorial) VALUES ('75819','le pianiste afghan: le','500','777','¿Que pasa por la mente de una niña en la guerra?','4555');
INSERT INTO Libros (isbn,titulo_libro,precio_libro,id_autor,sinopsis,codigs_editorial) VALUES ('97812','Nadie por Delante','250','411','Dice Heráclito que la guerra es el padre de todas las cosas','7891');

-- DATOS DE IMAGENES_LIBROS --
INSERT INTO Imagenes_Libros (ISbn_Libros,img_libro) VALUES ('98501','Public/img/Imagenes_Libros/1.jpg');
INSERT INTO Imagenes_Libros (ISbn_Libros,img_libro) VALUES ('51565','Public/img/Imagenes_Libros/2.jpg');
INSERT INTO Imagenes_Libros (ISbn_Libros,img_libro) VALUES ('12468','Public/img/Imagenes_Libros/3.jpg');
INSERT INTO Imagenes_Libros (ISbn_Libros,img_libro) VALUES ('75819','Public/img/Imagenes_Libros/4.jpg');
INSERT INTO Imagenes_Libros (ISbn_Libros,img_libro) VALUES ('97812','Public/img/Imagenes_Libros/5.jpg');

-- DATOS DE GENERO_LIBROS --

INSERT INTO  Generos_Libs (isbn_libs,id_autor,genero_libs) VALUES ('98501','333','Accion,Aventura,Horror');
INSERT INTO  Generos_Libs (isbn_libs,id_autor,genero_libs) VALUES ('51565','555','Horror,Horror Pisiologico,Aventura');
INSERT INTO  Generos_Libs (isbn_libs,id_autor,genero_libs) VALUES ('12468','433','Aventura,Fantasia,Accion,Terror');
INSERT INTO  Generos_Libs (isbn_libs,id_autor,genero_libs) VALUES ('75819','777','Aventura');
INSERT INTO  Generos_Libs (isbn_libs,id_autor,genero_libs) VALUES ('97812','411','Historico');

-- DATOS DE CARRITO_COMPRAS --

INSERT INTO Carrito_Compras (email_client,codigo_carrito,isbbn_Libros,fecha_hora) VALUES ('lucassyt@gmail.com','9824','98501','2022-11-24 17:15:10');
INSERT INTO Carrito_Compras (email_client,codigo_carrito,isbbn_Libros,fecha_hora) VALUES ('lucia@gmail.com','6721','51565','2022-11-25 18:25:05');
INSERT INTO Carrito_Compras (email_client,codigo_carrito,isbbn_Libros,fecha_hora) VALUES ('David@gmail.com','1289','12468','2022-07-11 13:30:37');
INSERT INTO Carrito_Compras (email_client,codigo_carrito,isbbn_Libros,fecha_hora) VALUES ('Augusto@gmail.com','3679','75819','2022-09-12 14:27:40');
INSERT INTO Carrito_Compras (email_client,codigo_carrito,isbbn_Libros,fecha_hora) VALUES ('Zoeyamigos@gmail.com','7891','97812','2022-05-15 15:46:02');

-- DATOS DE EDITORIALES --

INSERT INTO Editoriales (nombre_editorial,web_editorial) VALUES ('Editorial Manolo','Pagina Web Manolo');
INSERT INTO Editoriales (nombre_editorial,web_editorial) VALUES ('Editorial Japonesa','Pagina Web Japon');
INSERT INTO Editoriales (nombre_editorial,web_editorial) VALUES ('Editorial Los','Pagina Web Los');
INSERT INTO Editoriales (nombre_editorial,web_editorial) VALUES ('Editorial AgusMils','Pagina Web Agus');
INSERT INTO Editoriales (nombre_editorial,web_editorial) VALUES ('Editorial Marcelo','Pagina Web Marcelo');

-- DATOS DE Direccion_Editorial --

INSERT INTO Direccion_Editorial (nom_departamento,nom_ciudad,num_puerta) VALUES ('Canelones','Los Cerrillos','56');
INSERT INTO Direccion_Editorial (nom_departamento,nom_ciudad,num_puerta) VALUES ('Montevideo','Las Piedras','48');
INSERT INTO Direccion_Editorial (nom_departamento,nom_ciudad,num_puerta) VALUES ('Artigas','Bella Union','22');
INSERT INTO Direccion_Editorial (nom_departamento,nom_ciudad,num_puerta) VALUES ('Durazno','La Paloma','14');
INSERT INTO Direccion_Editorial (nom_departamento,nom_ciudad,num_puerta) VALUES ('Flores','Trinidad','78');

-- DATOS DE  Tele_Editorial --

INSERT INTO Tele_Editorial (NumTel_Editorial) VALUES ('09875473');
INSERT INTO Tele_Editorial (NumTel_Editorial) VALUES ('09175481');
INSERT INTO Tele_Editorial (NumTel_Editorial) VALUES ('09258992');
INSERT INTO Tele_Editorial (NumTel_Editorial) VALUES ('09355678');
INSERT INTO Tele_Editorial (NumTel_Editorial) VALUES ('09875473');

-- DATOS DE Compras --

INSERT INTO Compras (estado_compra,fecha_hora_compra) VALUES ('Aceptado','2022-11-12 20:00:00');
INSERT INTO Compras (estado_compra,fecha_hora_compra) VALUES ('Rechazado','2022-11-11 21:34:09');
INSERT INTO Compras (estado_compra,fecha_hora_compra) VALUES ('Aceptado','2022-11-05 19:08:35');
INSERT INTO Compras (estado_compra,fecha_hora_compra) VALUES ('Aceptado','2022-11-01 13:45:06');
INSERT INTO Compras (estado_compra,fecha_hora_compra) VALUES ('Rechazado','2022-10-12 13:25:09');

--  DATOS DE Detalle_Compra

INSERT INTO Detalle_Compras (isbn_books,codigoEditorial,metodo_pago_compra,precio_compra,cant_compra) VALUES ('98501','1','Debito','1500','15');
INSERT INTO Detalle_Compras (isbn_books,codigoEditorial,metodo_pago_compra,precio_compra,cant_compra) VALUES ('51565','2','Tarjeta Prepago','3500','0');
INSERT INTO Detalle_Compras (isbn_books,codigoEditorial,metodo_pago_compra,precio_compra,cant_compra) VALUES ('12468','3','Tarjeta de Comercio','5500','5');
INSERT INTO Detalle_Compras (isbn_books,codigoEditorial,metodo_pago_compra,precio_compra,cant_compra) VALUES ('75819','4','Debito','1320','4');
INSERT INTO Detalle_Compras (isbn_books,codigoEditorial,metodo_pago_compra,precio_compra,cant_compra) VALUES ('97812','5','Contra Rembolso','2222','0');

-- DATOS DE Ventas

INSERT INTO Ventas (emailsS_Clients,estado_venta,fecha_hora_venta)  VALUES ('lucassyt@gmail.com','Aceptado','2022-12-08 13:55:48');
INSERT INTO Ventas (emailsS_Clients,estado_venta,fecha_hora_venta)  VALUES ('lucia@gmail.com','Aceptado','2022-10-04 10:30:02');
INSERT INTO Ventas (emailsS_Clients,estado_venta,fecha_hora_venta)  VALUES ('David@gmail.com','Rechazado','2022-10-25 15:47:22');
INSERT INTO Ventas (emailsS_Clients,estado_venta,fecha_hora_venta)  VALUES ('Augusto@gmail.com','Aceptado','2022-11-15 18:25:59');
INSERT INTO Ventas (emailsS_Clients,estado_venta,fecha_hora_venta)  VALUES ('Zoeyamigos@gmail.com','Rechazado','2022-11-27 19:18:36');

-- DATOS DE PEDIDOS 

INSERT INTO Pedidos (EMail_clientss,id_venta,descrip_pedidos,sistema_envio) VALUES ('lucassyt@gmail.com','1','Pidio un libro de Jurassic Park','Envio a Domilicio');
INSERT INTO Pedidos (EMail_clientss,id_venta,descrip_pedidos,sistema_envio) VALUES ('lucia@gmail.com','2','Pidio un libro de IT','Sera entregado de forma virtual');
INSERT INTO Pedidos (EMail_clientss,id_venta,descrip_pedidos,sistema_envio) VALUES ('David@gmail.com','3','Pidio un libro de la actora Chabname Le pianiste afghan: roman','Retiro en el local mas cercano');
INSERT INTO Pedidos (EMail_clientss,id_venta,descrip_pedidos,sistema_envio) VALUES ('Augusto@gmail.com','4','Pidio un libro de Harry Potter','Envio a confirmar...');
INSERT INTO Pedidos (EMail_clientss,id_venta,descrip_pedidos,sistema_envio) VALUES ('ZoeyAmigos@gmail.com','5','Pidio 3 libros de Jurassic Park','Entrega a Domilicio');

-- DATOS DE Detalle_Venta

INSERT INTO Detalle_Ventas (Isbn_Book,cant_libros_comprados,costo_venta,metodo_pago,descuento_venta) VALUES ('98501','1','500','Debito','25');
INSERT INTO Detalle_Ventas (Isbn_Book,cant_libros_comprados,costo_venta,metodo_pago,descuento_venta) VALUES ('51565','2','1000','Efectivo','5');
INSERT INTO Detalle_Ventas (Isbn_Book,cant_libros_comprados,costo_venta,metodo_pago,descuento_venta) VALUES ('12468','3','1500','Debito','2');
INSERT INTO Detalle_Ventas (Isbn_Book,cant_libros_comprados,costo_venta,metodo_pago,descuento_venta) VALUES ('75819','4','278','Efectivo','0');
INSERT INTO Detalle_Ventas (Isbn_Book,cant_libros_comprados,costo_venta,metodo_pago,descuento_venta) VALUES ('97812','5','580','Debito','10');